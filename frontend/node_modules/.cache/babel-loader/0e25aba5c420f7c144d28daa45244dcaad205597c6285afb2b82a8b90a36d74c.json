{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { positionElements } from 'positioning';\nvar QuillEvents;\n(function (QuillEvents) {\n  QuillEvents[\"EDITOR_CHANGE\"] = \"editor-change\";\n  QuillEvents[\"SCROLL_BEFORE_UPDATE\"] = \"scroll-before-update\";\n  QuillEvents[\"SCROLL_BLOT_MOUNT\"] = \"scroll-blot-mount\";\n  QuillEvents[\"SCROLL_BLOT_UNMOUNT\"] = \"scroll-blot-unmount\";\n  QuillEvents[\"SCROLL_OPTIMIZE\"] = \"scroll-optimize\";\n  QuillEvents[\"SCROLL_UPDATE\"] = \"scroll-update\";\n  QuillEvents[\"SELECTION_CHANGE\"] = \"selection-change\";\n  QuillEvents[\"TEXT_CHANGE\"] = \"text-change\";\n})(QuillEvents || (QuillEvents = {}));\nvar QuillSources;\n(function (QuillSources) {\n  QuillSources[\"API\"] = \"api\";\n  QuillSources[\"SILENT\"] = \"silent\";\n  QuillSources[\"USER\"] = \"user\";\n})(QuillSources || (QuillSources = {}));\nvar DEFAULT_PLACEMENT = ['bottom-left', 'bottom-right', 'top-left', 'top-right', 'auto'];\nvar iconAddColRight = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M73.142857 336.64h526.628572v43.885714H73.142857zM73.142857 643.657143h526.628572v43.885714H73.142857zM336.457143 117.028571h43.885714v789.942858h-43.885714zM204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.84 131.84 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.771429 87.771429 0 0 0 87.771429 87.771429h614.4a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM819.2 73.142857h-219.428571v877.714286h219.428571a131.657143 131.657143 0 0 0 131.657143-131.657143V204.8A131.84 131.84 0 0 0 819.2 73.142857z m44.068571 460.982857h-65.828571v65.828572H753.371429v-65.828572h-65.828572V490.057143h65.828572v-65.828572h44.068571v65.828572h65.828571z\" /></svg>';\nvar iconAddColLeft = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M380.342857 336.457143h526.811429v43.885714H380.342857z m0 307.2h526.811429v43.885714H380.342857zM643.657143 117.028571h43.885714v789.942858h-43.885714zM204.8 73.142857h614.582857A131.474286 131.474286 0 0 1 950.857143 204.8v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.657143 131.657143 0 0 1 204.8 73.142857z m0 43.885714a87.588571 87.588571 0 0 0-87.588571 87.771429v614.4a87.588571 87.588571 0 0 0 87.588571 87.771429h614.582857a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM204.8 73.142857A131.657143 131.657143 0 0 0 73.142857 204.8v614.4a131.657143 131.657143 0 0 0 131.657143 131.657143h219.428571V73.142857z m131.84 460.8h-65.828571v65.828572h-43.885715v-65.828572h-65.828571v-43.885714h65.828571v-65.828572h43.885715v65.828572h65.828571z\" /></svg>';\nvar iconAddRowAbove = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M73.142857 599.771429h877.714286v43.885714H73.142857zM336.457143 380.342857h43.885714v526.628572h-43.885714z m307.2 0h43.885714v526.628572h-43.885714zM204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.657143 131.657143 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.588571 87.588571 0 0 0 87.771429 87.771429h614.4a87.588571 87.588571 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM819.2 73.142857H204.8A131.657143 131.657143 0 0 0 73.142857 204.8v219.428571h877.714286v-219.428571A131.657143 131.657143 0 0 0 819.2 73.142857z m-219.428571 197.485714h-65.828572v65.828572h-43.885714v-65.828572h-65.828572v-43.885714h65.828572V160.914286h43.885714v65.828571h65.828572z\" /></svg>';\nvar iconAddRowBelow = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.84 131.84 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.771429 87.771429 0 0 0 87.771429 87.771429h614.4a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM73.142857 336.457143h877.714286v44.068571H73.142857zM336.64 117.028571h43.885714v526.628572h-43.885714z m307.017143 0h44.068571v526.628572H643.657143zM73.142857 599.771429v219.428571a131.657143 131.657143 0 0 0 131.657143 131.657143h614.4a131.657143 131.657143 0 0 0 131.657143-131.657143v-219.428571z m526.628572 197.485714h-65.645715v65.828571H490.057143v-65.828571h-65.828572v-43.885714h65.828572v-65.828572h44.068571v65.828572h65.645715z\" /></svg>';\nvar iconRemoveCol = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M925.996 99.038c-25.47-25.6-60.121-39.822-96.323-39.822H194.198c-75.12 0.13-136.016 61.026-136.145 136.146v635.345c0 36.073 14.351 70.723 39.822 96.323 25.6 25.73 60.25 40.081 96.323 40.081h635.475c36.072 0 70.723-14.351 96.323-39.951 25.6-25.6 39.951-60.122 39.951-96.324V195.362c0-36.073-14.351-70.724-39.951-96.324z m-365.77 494.287L512 545.228l-48.226 48.097-32.194-31.935 48.355-48.226-48.226-48.097 32.194-32.194L512 480.97l48.097-48.097 32.194 32.194-48.097 48.097 48.226 48.226-32.194 31.935zM103.434 195.362c0-24.049 9.568-47.192 26.635-64.13 17.066-17.066 40.08-26.634 64.129-26.634h136.145v226.91H103.434V195.361z m0 181.656h226.91V649.31h-226.91V377.02z m90.764 544.84c-24.049 0-47.192-9.567-64.13-26.634-17.066-17.066-26.634-40.08-26.634-64.258V694.69h226.91v227.168H194.197z m726.238-90.763c0 24.048-9.438 47.192-26.505 64.259-17.066 17.066-40.21 26.634-64.258 26.505H693.527V694.69h226.91v136.404z m0-181.786H693.527V377.02h226.91v272.29zM693.527 331.507V104.598h136.146c24.048 0 47.192 9.438 64.258 26.505 17.067 17.067 26.635 40.21 26.505 64.259v136.145H693.527z\" /></svg>';\nvar iconRemoveRow = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M925.99596 99.038384c-25.470707-25.6-60.121212-39.822222-96.323233-39.822222H194.19798c-36.072727 0-70.723232 14.351515-96.323233 39.822222-25.6 25.6-39.822222 60.121212-39.822222 96.323232v635.474748c0 36.072727 14.351515 70.723232 39.822222 96.323232C123.474747 952.759596 158.125253 967.111111 194.19798 967.111111h635.474747c36.072727 0 70.723232-14.351515 96.323233-39.951515 25.6-25.6 39.951515-60.121212 39.951515-96.323232V195.361616c0-36.072727-14.351515-70.723232-39.951515-96.323232z m-550.270707 5.559596h272.290909v227.167677H375.725253V104.59798z m56.242424 360.468687l31.935353-32.19394 48.09697 48.226263 48.09697-48.226263 32.193939 32.19394-48.09697 48.096969 48.226263 48.226263-32.193939 31.935354-48.226263-48.09697-48.226263 48.09697-31.935353-31.935354 48.226262-48.226263-48.096969-48.096969zM103.434343 195.361616c0-24.048485 9.567677-47.191919 26.634344-64.129293 17.066667-17.066667 40.080808-26.634343 64.129293-26.634343h136.145454v227.167677H103.434343V195.361616z m817.002021 635.733333c0 24.048485-9.567677 47.191919-26.634344 64.258586-17.066667 17.066667-40.080808 26.634343-64.129293 26.634344H194.19798c-24.048485 0-47.191919-9.567677-64.258586-26.634344C112.872727 878.157576 103.434343 855.014141 103.434343 830.836364V694.690909h226.909091v226.909091h45.381819V694.690909h272.290909v226.909091h45.381818V694.690909h226.909091v136.40404z m0-499.329292H693.527273V104.59798h136.145454c24.048485 0 47.191919 9.567677 64.129293 26.634343 17.066667 17.066667 26.634343 40.080808 26.634344 64.129293v136.404041z\" /></svg>';\nvar iconRemoveTable = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M764.42168889 830.5152c0 30.23530667-24.61013333 54.84430222-54.84316444 54.84430222H314.42147555c-30.23416889 0-54.84316445-24.61013333-54.84316444-54.84430222V248.32796445h504.84337778v582.18723555zM369.26577778 149.89084445c0-6.32832 4.92202667-11.25034667 11.25034667-11.25034667H644.18702222c6.32832 0 11.25034667 4.92202667 11.25034667 11.25034667v33.04675555H369.26577778V149.89084445z m559.68768 33.04675555H720.82773333V149.89084445c0-42.1888-34.45191111-76.64071111-76.64071111-76.64071112H380.51612445c-42.1888 0-76.64071111 34.45191111-76.64071112 76.64071112v33.04675555h-208.82773333c-18.28181333 0-33.04789333 14.76608-33.04789333 33.04675555s14.76608 33.04675555 33.04675555 33.04675556h98.43825778v581.48408889c0 66.79779555 54.14001778 120.93781333 120.93667555 120.93781333h395.1570489c66.79665778 0 120.93667555-54.14001778 120.93667555-120.93781333V248.32796445h98.43825778c18.28067555 0 33.04675555-14.76494222 33.04675555-33.04675556s-14.76608-32.34360889-33.04675555-32.34360889zM512 786.21923555c18.28181333 0 33.04675555-14.76608 33.04675555-33.04789333v-351.56195555c0-18.28181333-14.76494222-33.04675555-33.04675555-33.04675556s-33.04675555 14.76494222-33.04675555 33.04675556v351.56195555c0 18.28181333 14.76494222 33.04789333 33.04675555 33.04789333m-153.98456889 0c18.28181333 0 33.04675555-14.76608 33.04675556-33.04789333v-351.56195555c0-18.28181333-14.76494222-33.04675555-33.04675556-33.04675556s-33.04675555 14.76494222-33.04675556 33.04675556v351.56195555c0.70314667 18.28181333 15.46922667 33.04789333 33.04675556 33.04789333m307.96913778 0c18.28067555 0 33.04675555-14.76608 33.04675556-33.04789333v-351.56195555c0-18.28181333-14.76608-33.04675555-33.04675556-33.04675556s-33.04675555 14.76494222-33.04675556 33.04675556v351.56195555c0 18.28181333 14.76494222 33.04789333 33.04675556 33.04789333\" /></svg>';\nvar TableUI = /** @class */function () {\n  function TableUI(quill, options) {\n    var _this = this;\n    this.TOGGLE_TEMPLATE = \"<svg width=\\\"9\\\" height=\\\"9\\\" viewBox=\\\"0 0 60 60\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><g><path d=\\\"M8,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S12.411,22,8,22z\\\"/><path d=\\\"M52,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S56.411,22,52,22z\\\"/><path d=\\\"M30,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,22,30,22z\\\"/></g></svg>\";\n    this.DEFAULTS = {\n      maxRowCount: -1\n    };\n    this.menuItems = [{\n      title: 'Insert column right',\n      icon: iconAddColRight,\n      handler: function () {\n        if (!(_this.options.maxRowCount > 0) || _this.getColCount() < _this.options.maxRowCount) {\n          _this.table.insertColumnRight();\n        }\n      }\n    }, {\n      title: 'Insert column left',\n      icon: iconAddColLeft,\n      handler: function () {\n        if (!(_this.options.maxRowCount > 0) || _this.getColCount() < _this.options.maxRowCount) {\n          _this.table.insertColumnLeft();\n        }\n      }\n    }, {\n      title: 'Insert row above',\n      icon: iconAddRowAbove,\n      handler: function () {\n        _this.table.insertRowAbove();\n      }\n    }, {\n      title: 'Insert row below',\n      icon: iconAddRowBelow,\n      handler: function () {\n        _this.table.insertRowBelow();\n      }\n    }, {\n      title: 'Delete column',\n      icon: iconRemoveCol,\n      handler: function () {\n        _this.table.deleteColumn();\n      }\n    }, {\n      title: 'Delete row',\n      icon: iconRemoveRow,\n      handler: function () {\n        _this.table.deleteRow();\n      }\n    }, {\n      title: 'Delete table',\n      icon: iconRemoveTable,\n      handler: function () {\n        _this.table.deleteTable();\n      }\n    }];\n    this.editorChangeHandler = function (type, range, oldRange, source) {\n      if (type === QuillEvents.SELECTION_CHANGE) {\n        _this.detectButton(range);\n      }\n    };\n    this.contextMenuHandler = function (evt) {\n      if (!_this.isTable()) {\n        return true;\n      }\n      evt.preventDefault();\n      _this.showMenu();\n    };\n    this.toggleClickHandler = function (e) {\n      _this.toggleMenu();\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    this.docClickHandler = function () {\n      return _this.hideMenu;\n    };\n    this.quill = quill;\n    this.options = __assign(__assign({}, this.DEFAULTS), options);\n    this.table = quill.getModule('table');\n    if (!this.table) {\n      console.error('\"table\" module not found');\n      return;\n    }\n    this.toggle = quill.addContainer('ql-table-toggle');\n    this.toggle.classList.add('ql-table-toggle_hidden');\n    this.toggle.innerHTML = this.TOGGLE_TEMPLATE;\n    this.toggle.addEventListener('click', this.toggleClickHandler);\n    this.quill.on(QuillEvents.EDITOR_CHANGE, this.editorChangeHandler);\n    this.quill.root.addEventListener('contextmenu', this.contextMenuHandler);\n  }\n  TableUI.prototype.isTable = function (range) {\n    if (!range) {\n      range = this.quill.getSelection();\n    }\n    if (!range) {\n      return false;\n    }\n    var formats = this.quill.getFormat(range.index);\n    return !!(formats['table'] && !range.length);\n  };\n  TableUI.prototype.getColCount = function (range) {\n    if (range === void 0) {\n      range = null;\n    }\n    if (!range) {\n      range = this.quill.getSelection();\n    }\n    if (!range) {\n      return 0;\n    }\n    var table = this.table.getTable(range)[0];\n    if (!table) {\n      return 0;\n    }\n    var maxColumns = table.rows().reduce(function (max, row) {\n      return Math.max(row.children.length, max);\n    }, 0);\n    return maxColumns;\n  };\n  TableUI.prototype.showMenu = function () {\n    var _this = this;\n    this.hideMenu();\n    this.menu = this.quill.addContainer('ql-table-menu');\n    this.menuItems.forEach(function (it) {\n      _this.menu.appendChild(_this.createMenuItem(it));\n    });\n    positionElements(this.toggle, this.menu, DEFAULT_PLACEMENT, false);\n    document.addEventListener('click', this.docClickHandler);\n  };\n  TableUI.prototype.hideMenu = function () {\n    if (this.menu) {\n      this.menu.remove();\n      this.menu = null;\n      document.removeEventListener('click', this.docClickHandler);\n    }\n  };\n  TableUI.prototype.createMenuItem = function (item) {\n    var _this = this;\n    var node = document.createElement('div');\n    node.classList.add('ql-table-menu__item');\n    var iconSpan = document.createElement('span');\n    iconSpan.classList.add('ql-table-menu__item-icon');\n    iconSpan.innerHTML = item.icon;\n    var textSpan = document.createElement('span');\n    textSpan.classList.add('ql-table-menu__item-text');\n    textSpan.innerText = item.title;\n    node.appendChild(iconSpan);\n    node.appendChild(textSpan);\n    node.addEventListener('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this.quill.focus();\n      item.handler();\n      _this.hideMenu();\n      _this.detectButton(_this.quill.getSelection());\n    }, false);\n    return node;\n  };\n  TableUI.prototype.detectButton = function (range) {\n    if (range == null) {\n      return;\n    }\n    var show = this.isTable(range);\n    if (show) {\n      var _a = this.quill.getLine(range.index),\n        cell = _a[0],\n        offset = _a[1];\n      var containerBounds = this.quill.container.getBoundingClientRect();\n      var bounds = cell.domNode.getBoundingClientRect();\n      bounds = {\n        bottom: bounds.bottom - containerBounds.top,\n        height: bounds.height,\n        left: bounds.left - containerBounds.left,\n        right: bounds.right - containerBounds.left,\n        top: bounds.top - containerBounds.top,\n        width: bounds.width\n      };\n      this.showToggle(bounds);\n    } else {\n      this.hideToggle();\n      this.hideMenu();\n    }\n  };\n  TableUI.prototype.showToggle = function (position) {\n    this.position = position;\n    this.toggle.classList.remove('ql-table-toggle_hidden');\n    this.toggle.style.top = position.top + \"px\";\n    this.toggle.style.left = position.left + \"px\";\n  };\n  TableUI.prototype.hideToggle = function () {\n    this.toggle.classList.add('ql-table-toggle_hidden');\n  };\n  TableUI.prototype.toggleMenu = function () {\n    if (this.menu) {\n      this.hideToggle();\n    } else {\n      this.showMenu();\n    }\n  };\n  TableUI.prototype.destroy = function () {\n    this.hideMenu();\n    this.quill.off(QuillEvents.EDITOR_CHANGE, this.editorChangeHandler);\n    this.quill.root.removeEventListener('contextmenu', this.contextMenuHandler);\n    this.toggle.removeEventListener('click', this.toggleClickHandler);\n    this.toggle.remove();\n    this.toggle = null;\n    this.options = this.DEFAULTS;\n    this.menu = null;\n    this.table = null;\n    this.quill = null;\n  };\n  return TableUI;\n}();\nexport default TableUI;","map":{"version":3,"names":["positionElements","QuillEvents","QuillSources","DEFAULT_PLACEMENT","iconAddColRight","iconAddColLeft","iconAddRowAbove","iconAddRowBelow","iconRemoveCol","iconRemoveRow","iconRemoveTable","TableUI","quill","options","_this","TOGGLE_TEMPLATE","DEFAULTS","maxRowCount","menuItems","title","icon","handler","getColCount","table","insertColumnRight","insertColumnLeft","insertRowAbove","insertRowBelow","deleteColumn","deleteRow","deleteTable","editorChangeHandler","type","range","oldRange","source","SELECTION_CHANGE","detectButton","contextMenuHandler","evt","isTable","preventDefault","showMenu","toggleClickHandler","e","toggleMenu","stopPropagation","docClickHandler","hideMenu","__assign","getModule","console","error","toggle","addContainer","classList","add","innerHTML","addEventListener","on","EDITOR_CHANGE","root","prototype","getSelection","formats","getFormat","index","length","getTable","maxColumns","rows","reduce","max","row","Math","children","menu","forEach","it","appendChild","createMenuItem","document","remove","removeEventListener","item","node","createElement","iconSpan","textSpan","innerText","focus","show","_a","getLine","cell","offset","containerBounds","container","getBoundingClientRect","bounds","domNode","bottom","top","height","left","right","width","showToggle","hideToggle","position","style","destroy","off"],"sources":["/workspaces/skills-copilot-codespaces-vscode/frontend/node_modules/quill-table-ui/src/index.ts"],"sourcesContent":["import * as Quill from 'quill';\r\nimport { positionElements, Placement } from 'positioning';\r\n\r\ninterface Range {\r\n  index: number;\r\n  length: number;\r\n}\r\n\r\nenum QuillEvents {\r\n  EDITOR_CHANGE = 'editor-change',\r\n  SCROLL_BEFORE_UPDATE = 'scroll-before-update',\r\n  SCROLL_BLOT_MOUNT = 'scroll-blot-mount',\r\n  SCROLL_BLOT_UNMOUNT = 'scroll-blot-unmount',\r\n  SCROLL_OPTIMIZE = 'scroll-optimize',\r\n  SCROLL_UPDATE = 'scroll-update',\r\n  SELECTION_CHANGE = 'selection-change',\r\n  TEXT_CHANGE = 'text-change',\r\n}\r\n\r\nenum QuillSources {\r\n  API = 'api',\r\n  SILENT = 'silent',\r\n  USER = 'user',\r\n}\r\n\r\nconst DEFAULT_PLACEMENT: Placement[] = [\r\n  'bottom-left',\r\n  'bottom-right',\r\n  'top-left',\r\n  'top-right',\r\n  'auto',\r\n];\r\n\r\nconst iconAddColRight =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M73.142857 336.64h526.628572v43.885714H73.142857zM73.142857 643.657143h526.628572v43.885714H73.142857zM336.457143 117.028571h43.885714v789.942858h-43.885714zM204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.84 131.84 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.771429 87.771429 0 0 0 87.771429 87.771429h614.4a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM819.2 73.142857h-219.428571v877.714286h219.428571a131.657143 131.657143 0 0 0 131.657143-131.657143V204.8A131.84 131.84 0 0 0 819.2 73.142857z m44.068571 460.982857h-65.828571v65.828572H753.371429v-65.828572h-65.828572V490.057143h65.828572v-65.828572h44.068571v65.828572h65.828571z\" /></svg>';\r\nconst iconAddColLeft =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M380.342857 336.457143h526.811429v43.885714H380.342857z m0 307.2h526.811429v43.885714H380.342857zM643.657143 117.028571h43.885714v789.942858h-43.885714zM204.8 73.142857h614.582857A131.474286 131.474286 0 0 1 950.857143 204.8v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.657143 131.657143 0 0 1 204.8 73.142857z m0 43.885714a87.588571 87.588571 0 0 0-87.588571 87.771429v614.4a87.588571 87.588571 0 0 0 87.588571 87.771429h614.582857a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM204.8 73.142857A131.657143 131.657143 0 0 0 73.142857 204.8v614.4a131.657143 131.657143 0 0 0 131.657143 131.657143h219.428571V73.142857z m131.84 460.8h-65.828571v65.828572h-43.885715v-65.828572h-65.828571v-43.885714h65.828571v-65.828572h43.885715v65.828572h65.828571z\" /></svg>';\r\nconst iconAddRowAbove =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M73.142857 599.771429h877.714286v43.885714H73.142857zM336.457143 380.342857h43.885714v526.628572h-43.885714z m307.2 0h43.885714v526.628572h-43.885714zM204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.657143 131.657143 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.588571 87.588571 0 0 0 87.771429 87.771429h614.4a87.588571 87.588571 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM819.2 73.142857H204.8A131.657143 131.657143 0 0 0 73.142857 204.8v219.428571h877.714286v-219.428571A131.657143 131.657143 0 0 0 819.2 73.142857z m-219.428571 197.485714h-65.828572v65.828572h-43.885714v-65.828572h-65.828572v-43.885714h65.828572V160.914286h43.885714v65.828571h65.828572z\" /></svg>';\r\nconst iconAddRowBelow =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M204.8 73.142857h614.4a131.657143 131.657143 0 0 1 131.657143 131.657143v614.4a131.657143 131.657143 0 0 1-131.657143 131.657143H204.8A131.657143 131.657143 0 0 1 73.142857 819.2V204.8A131.84 131.84 0 0 1 204.8 73.142857z m0 43.885714a87.771429 87.771429 0 0 0-87.771429 87.771429v614.4a87.771429 87.771429 0 0 0 87.771429 87.771429h614.4a87.771429 87.771429 0 0 0 87.771429-87.771429V204.8a87.771429 87.771429 0 0 0-87.771429-87.771429zM73.142857 336.457143h877.714286v44.068571H73.142857zM336.64 117.028571h43.885714v526.628572h-43.885714z m307.017143 0h44.068571v526.628572H643.657143zM73.142857 599.771429v219.428571a131.657143 131.657143 0 0 0 131.657143 131.657143h614.4a131.657143 131.657143 0 0 0 131.657143-131.657143v-219.428571z m526.628572 197.485714h-65.645715v65.828571H490.057143v-65.828571h-65.828572v-43.885714h65.828572v-65.828572h44.068571v65.828572h65.645715z\" /></svg>';\r\nconst iconRemoveCol =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M925.996 99.038c-25.47-25.6-60.121-39.822-96.323-39.822H194.198c-75.12 0.13-136.016 61.026-136.145 136.146v635.345c0 36.073 14.351 70.723 39.822 96.323 25.6 25.73 60.25 40.081 96.323 40.081h635.475c36.072 0 70.723-14.351 96.323-39.951 25.6-25.6 39.951-60.122 39.951-96.324V195.362c0-36.073-14.351-70.724-39.951-96.324z m-365.77 494.287L512 545.228l-48.226 48.097-32.194-31.935 48.355-48.226-48.226-48.097 32.194-32.194L512 480.97l48.097-48.097 32.194 32.194-48.097 48.097 48.226 48.226-32.194 31.935zM103.434 195.362c0-24.049 9.568-47.192 26.635-64.13 17.066-17.066 40.08-26.634 64.129-26.634h136.145v226.91H103.434V195.361z m0 181.656h226.91V649.31h-226.91V377.02z m90.764 544.84c-24.049 0-47.192-9.567-64.13-26.634-17.066-17.066-26.634-40.08-26.634-64.258V694.69h226.91v227.168H194.197z m726.238-90.763c0 24.048-9.438 47.192-26.505 64.259-17.066 17.066-40.21 26.634-64.258 26.505H693.527V694.69h226.91v136.404z m0-181.786H693.527V377.02h226.91v272.29zM693.527 331.507V104.598h136.146c24.048 0 47.192 9.438 64.258 26.505 17.067 17.067 26.635 40.21 26.505 64.259v136.145H693.527z\" /></svg>';\r\nconst iconRemoveRow =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M925.99596 99.038384c-25.470707-25.6-60.121212-39.822222-96.323233-39.822222H194.19798c-36.072727 0-70.723232 14.351515-96.323233 39.822222-25.6 25.6-39.822222 60.121212-39.822222 96.323232v635.474748c0 36.072727 14.351515 70.723232 39.822222 96.323232C123.474747 952.759596 158.125253 967.111111 194.19798 967.111111h635.474747c36.072727 0 70.723232-14.351515 96.323233-39.951515 25.6-25.6 39.951515-60.121212 39.951515-96.323232V195.361616c0-36.072727-14.351515-70.723232-39.951515-96.323232z m-550.270707 5.559596h272.290909v227.167677H375.725253V104.59798z m56.242424 360.468687l31.935353-32.19394 48.09697 48.226263 48.09697-48.226263 32.193939 32.19394-48.09697 48.096969 48.226263 48.226263-32.193939 31.935354-48.226263-48.09697-48.226263 48.09697-31.935353-31.935354 48.226262-48.226263-48.096969-48.096969zM103.434343 195.361616c0-24.048485 9.567677-47.191919 26.634344-64.129293 17.066667-17.066667 40.080808-26.634343 64.129293-26.634343h136.145454v227.167677H103.434343V195.361616z m817.002021 635.733333c0 24.048485-9.567677 47.191919-26.634344 64.258586-17.066667 17.066667-40.080808 26.634343-64.129293 26.634344H194.19798c-24.048485 0-47.191919-9.567677-64.258586-26.634344C112.872727 878.157576 103.434343 855.014141 103.434343 830.836364V694.690909h226.909091v226.909091h45.381819V694.690909h272.290909v226.909091h45.381818V694.690909h226.909091v136.40404z m0-499.329292H693.527273V104.59798h136.145454c24.048485 0 47.191919 9.567677 64.129293 26.634343 17.066667 17.066667 26.634343 40.080808 26.634344 64.129293v136.404041z\" /></svg>';\r\nconst iconRemoveTable =\r\n  '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg class=\"icon\" width=\"20px\" height=\"20.00px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#595959\" d=\"M764.42168889 830.5152c0 30.23530667-24.61013333 54.84430222-54.84316444 54.84430222H314.42147555c-30.23416889 0-54.84316445-24.61013333-54.84316444-54.84430222V248.32796445h504.84337778v582.18723555zM369.26577778 149.89084445c0-6.32832 4.92202667-11.25034667 11.25034667-11.25034667H644.18702222c6.32832 0 11.25034667 4.92202667 11.25034667 11.25034667v33.04675555H369.26577778V149.89084445z m559.68768 33.04675555H720.82773333V149.89084445c0-42.1888-34.45191111-76.64071111-76.64071111-76.64071112H380.51612445c-42.1888 0-76.64071111 34.45191111-76.64071112 76.64071112v33.04675555h-208.82773333c-18.28181333 0-33.04789333 14.76608-33.04789333 33.04675555s14.76608 33.04675555 33.04675555 33.04675556h98.43825778v581.48408889c0 66.79779555 54.14001778 120.93781333 120.93667555 120.93781333h395.1570489c66.79665778 0 120.93667555-54.14001778 120.93667555-120.93781333V248.32796445h98.43825778c18.28067555 0 33.04675555-14.76494222 33.04675555-33.04675556s-14.76608-32.34360889-33.04675555-32.34360889zM512 786.21923555c18.28181333 0 33.04675555-14.76608 33.04675555-33.04789333v-351.56195555c0-18.28181333-14.76494222-33.04675555-33.04675555-33.04675556s-33.04675555 14.76494222-33.04675555 33.04675556v351.56195555c0 18.28181333 14.76494222 33.04789333 33.04675555 33.04789333m-153.98456889 0c18.28181333 0 33.04675555-14.76608 33.04675556-33.04789333v-351.56195555c0-18.28181333-14.76494222-33.04675555-33.04675556-33.04675556s-33.04675555 14.76494222-33.04675556 33.04675556v351.56195555c0.70314667 18.28181333 15.46922667 33.04789333 33.04675556 33.04789333m307.96913778 0c18.28067555 0 33.04675555-14.76608 33.04675556-33.04789333v-351.56195555c0-18.28181333-14.76608-33.04675555-33.04675556-33.04675556s-33.04675555 14.76494222-33.04675556 33.04675556v351.56195555c0 18.28181333 14.76494222 33.04789333 33.04675556 33.04789333\" /></svg>';\r\n\r\nexport interface MenuItem {\r\n  title: string;\r\n  icon: string;\r\n  handler: () => void;\r\n}\r\n\r\nexport interface TableUIOptions {\r\n  maxRowCount?: number;\r\n}\r\n\r\nexport default class TableUI {\r\n  TOGGLE_TEMPLATE = `<svg width=\"9\" height=\"9\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M8,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S12.411,22,8,22z\"/><path d=\"M52,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S56.411,22,52,22z\"/><path d=\"M30,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,22,30,22z\"/></g></svg>`;\r\n  DEFAULTS: TableUIOptions = {\r\n    maxRowCount: -1,\r\n  };\r\n\r\n  quill: Quill;\r\n  options: any;\r\n  toggle: HTMLElement;\r\n  menu: HTMLElement;\r\n  position: any;\r\n  table: any;\r\n\r\n  menuItems: MenuItem[] = [\r\n    {\r\n      title: 'Insert column right',\r\n      icon: iconAddColRight,\r\n      handler: () => {\r\n        if (\r\n          !(this.options.maxRowCount > 0) ||\r\n          this.getColCount() < this.options.maxRowCount\r\n        ) {\r\n          this.table.insertColumnRight();\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Insert column left',\r\n      icon: iconAddColLeft,\r\n      handler: () => {\r\n        if (\r\n          !(this.options.maxRowCount > 0) ||\r\n          this.getColCount() < this.options.maxRowCount\r\n        ) {\r\n          this.table.insertColumnLeft();\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Insert row above',\r\n      icon: iconAddRowAbove,\r\n      handler: () => {\r\n        this.table.insertRowAbove();\r\n      },\r\n    },\r\n    {\r\n      title: 'Insert row below',\r\n      icon: iconAddRowBelow,\r\n      handler: () => {\r\n        this.table.insertRowBelow();\r\n      },\r\n    },\r\n    {\r\n      title: 'Delete column',\r\n      icon: iconRemoveCol,\r\n      handler: () => {\r\n        this.table.deleteColumn();\r\n      },\r\n    },\r\n    {\r\n      title: 'Delete row',\r\n      icon: iconRemoveRow,\r\n      handler: () => {\r\n        this.table.deleteRow();\r\n      },\r\n    },\r\n    {\r\n      title: 'Delete table',\r\n      icon: iconRemoveTable,\r\n      handler: () => {\r\n        this.table.deleteTable();\r\n      },\r\n    },\r\n  ];\r\n\r\n  constructor(quill: Quill, options: any) {\r\n    this.quill = quill;\r\n    this.options = { ...this.DEFAULTS, ...options };\r\n    this.table = quill.getModule('table');\r\n    if (!this.table) {\r\n      console.error('\"table\" module not found');\r\n      return;\r\n    }\r\n\r\n    this.toggle = quill.addContainer('ql-table-toggle');\r\n    this.toggle.classList.add('ql-table-toggle_hidden');\r\n    this.toggle.innerHTML = this.TOGGLE_TEMPLATE;\r\n    this.toggle.addEventListener('click', this.toggleClickHandler);\r\n    this.quill.on(QuillEvents.EDITOR_CHANGE, this.editorChangeHandler);\r\n    this.quill.root.addEventListener('contextmenu', this.contextMenuHandler);\r\n  }\r\n\r\n  editorChangeHandler = (\r\n    type: QuillEvents,\r\n    range: Range,\r\n    oldRange: Range,\r\n    source: QuillSources\r\n  ) => {\r\n    if (type === QuillEvents.SELECTION_CHANGE) {\r\n      this.detectButton(range);\r\n    }\r\n  };\r\n\r\n  contextMenuHandler = (evt: MouseEvent) => {\r\n    if (!this.isTable()) {\r\n      return true;\r\n    }\r\n    evt.preventDefault();\r\n    this.showMenu();\r\n  };\r\n\r\n  toggleClickHandler = (e) => {\r\n    this.toggleMenu();\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  docClickHandler = () => this.hideMenu;\r\n\r\n  isTable(range?: Range) {\r\n    if (!range) {\r\n      range = this.quill.getSelection();\r\n    }\r\n    if (!range) {\r\n      return false;\r\n    }\r\n    const formats = this.quill.getFormat(range.index);\r\n\r\n    return !!(formats['table'] && !range.length);\r\n  }\r\n\r\n  getColCount(range: Range = null) {\r\n    if (!range) {\r\n      range = this.quill.getSelection();\r\n    }\r\n    if (!range) {\r\n      return 0;\r\n    }\r\n    const [table] = this.table.getTable(range);\r\n    if (!table) {\r\n      return 0;\r\n    }\r\n    const maxColumns = table.rows().reduce((max, row) => {\r\n      return Math.max(row.children.length, max);\r\n    }, 0);\r\n    return maxColumns;\r\n  }\r\n\r\n  showMenu() {\r\n    this.hideMenu();\r\n    this.menu = this.quill.addContainer('ql-table-menu');\r\n\r\n    this.menuItems.forEach((it) => {\r\n      this.menu.appendChild(this.createMenuItem(it));\r\n    });\r\n    positionElements(this.toggle, this.menu, DEFAULT_PLACEMENT, false);\r\n    document.addEventListener('click', this.docClickHandler);\r\n  }\r\n\r\n  hideMenu() {\r\n    if (this.menu) {\r\n      this.menu.remove();\r\n      this.menu = null;\r\n      document.removeEventListener('click', this.docClickHandler);\r\n    }\r\n  }\r\n\r\n  createMenuItem(item: MenuItem) {\r\n    const node = document.createElement('div');\r\n    node.classList.add('ql-table-menu__item');\r\n\r\n    const iconSpan = document.createElement('span');\r\n    iconSpan.classList.add('ql-table-menu__item-icon');\r\n    iconSpan.innerHTML = item.icon;\r\n\r\n    const textSpan = document.createElement('span');\r\n    textSpan.classList.add('ql-table-menu__item-text');\r\n    textSpan.innerText = item.title;\r\n\r\n    node.appendChild(iconSpan);\r\n    node.appendChild(textSpan);\r\n    node.addEventListener(\r\n      'click',\r\n      (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.quill.focus();\r\n        item.handler();\r\n        this.hideMenu();\r\n        this.detectButton(this.quill.getSelection());\r\n      },\r\n      false\r\n    );\r\n    return node;\r\n  }\r\n\r\n  detectButton(range: Range) {\r\n    if (range == null) {\r\n      return;\r\n    }\r\n\r\n    const show = this.isTable(range);\r\n    if (show) {\r\n      const [cell, offset] = this.quill.getLine(range.index);\r\n      const containerBounds = this.quill.container.getBoundingClientRect();\r\n      let bounds = cell.domNode.getBoundingClientRect();\r\n      bounds = {\r\n        bottom: bounds.bottom - containerBounds.top,\r\n        height: bounds.height,\r\n        left: bounds.left - containerBounds.left,\r\n        right: bounds.right - containerBounds.left,\r\n        top: bounds.top - containerBounds.top,\r\n        width: bounds.width,\r\n      };\r\n\r\n      this.showToggle(bounds);\r\n    } else {\r\n      this.hideToggle();\r\n      this.hideMenu();\r\n    }\r\n  }\r\n\r\n  showToggle(position: any) {\r\n    this.position = position;\r\n    this.toggle.classList.remove('ql-table-toggle_hidden');\r\n    this.toggle.style.top = `${position.top}px`;\r\n    this.toggle.style.left = `${position.left}px`;\r\n  }\r\n\r\n  hideToggle() {\r\n    this.toggle.classList.add('ql-table-toggle_hidden');\r\n  }\r\n\r\n  toggleMenu() {\r\n    if (this.menu) {\r\n      this.hideToggle();\r\n    } else {\r\n      this.showMenu();\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.hideMenu();\r\n    this.quill.off(QuillEvents.EDITOR_CHANGE, this.editorChangeHandler);\r\n    this.quill.root.removeEventListener('contextmenu', this.contextMenuHandler);\r\n    this.toggle.removeEventListener('click', this.toggleClickHandler);\r\n    this.toggle.remove();\r\n    this.toggle = null;\r\n    this.options = this.DEFAULTS;\r\n    this.menu = null;\r\n    this.table = null;\r\n    this.quill = null;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}